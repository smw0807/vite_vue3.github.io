import{E as D,d as A,r as f,c as P,o as O,a as m,b as g,e as c,w as u,f as $,g as z,h as B,i as d,t as h,F as J,j as K,u as j,s as U,k as n,l as G,m as H}from"./index.fc04dfa3.js";import{u as M,s as R,a as T}from"./search.76461858.js";const q=()=>{D({title:"\uC874\uC7AC\uD558\uC9C0 \uC54A\uB294 \uD50C\uB808\uC774\uC5B4 \uB2C9\uB124\uC784\uC785\uB2C8\uB2E4.",message:"\uD50C\uB7AB\uD3FC \uB610\uB294 \uB2C9\uB124\uC784 \uB300\uC18C\uBB38\uC790\uB97C \uD655\uC778\uD574\uC8FC\uC2DC\uAE30 \uBC14\uB78D\uB2C8\uB2E4.",type:"info"})},Q=()=>{D({title:"\uC694\uCCAD\uC218\uAC00 \uB108\uBB34 \uB9CE\uC2B5\uB2C8\uB2E4.",message:"\uC7A0\uC2DC\uD6C4\uC5D0 \uB2E4\uC2DC \uAC80\uC0C9\uD574\uC8FC\uC2DC\uAE30 \uBC14\uB78D\uB2C8\uB2E4.",type:"warning"})},W={class:"value"},X=A({__name:"Search",emits:["searchInfo"],setup(E,{emit:_}){M();const t=f({platform:"",nickname:""}),l=f([]),r=()=>{const e=localStorage.getItem("yourstat_search_history");return e?JSON.parse(e):[]},s=e=>{if(!localStorage.getItem("yourstat_search_history")){localStorage.setItem("yourstat_search_history",JSON.stringify([e]));return}localStorage.setItem("yourstat_search_history",JSON.stringify(e))},i=()=>{const e=r();e.length!==0&&e.length>10&&(e.shift(),s(e))},S=e=>{const a=r();a.length===0?s(e):a.some(C=>C.nickname===e.nickname)||(a.push({platform:e.platform,nickname:e.nickname}),s(a)),l.value=r()},w=f([{label:"\uC2A4\uD300",value:"steam"},{label:"\uCE74\uCE74\uC624",value:"kakao"}]),y=e=>{localStorage.setItem("yourstat_search_platform",e)},k=P(()=>l.value),b=(e,a)=>{const C=e?k.value.filter(p=>p.nickname.indexOf(e)!==-1):k.value;a(C)},x=e=>{t.value.platform=e.platform,t.value.nickname=e.nickname,y(e.platform)},v=()=>{t.value.platform&&t.value.nickname&&(i(),S(t.value),_("searchInfo",t.value))};return O(()=>{t.value.platform=localStorage.getItem("yourstat_search_platform")||"",t.value.nickname="",l.value=[...r()]}),(e,a)=>{const C=n("el-tag"),p=n("el-option"),I=n("el-select"),V=n("el-button"),F=n("el-autocomplete"),N=n("el-col"),L=n("el-row");return m(),g("div",null,[c(L,null,{default:u(()=>[c(N,{align:"middle"},{default:u(()=>[c(F,{modelValue:t.value.nickname,"onUpdate:modelValue":a[1]||(a[1]=o=>t.value.nickname=o),placeholder:"\uAC8C\uC784 \uB2C9\uB124\uC784(\uB300\uC18C\uBB38\uC790\uAC00 \uC77C\uCE58\uD574\uC57C \uB429\uB2C8\uB2E4.)",class:"input-with-select",size:"large",style:{width:"500px"},onKeyup:$(v,["enter"]),onSelect:x,"fetch-suggestions":b,clearable:""},{default:u(({item:o})=>[z("div",W,[o.platform==="kakao"?(m(),B(C,{key:0,color:"#FAED7D"},{default:u(()=>[d(h(o.platform),1)]),_:2},1024)):(m(),B(C,{key:1,type:""},{default:u(()=>[d(h(o.platform),1)]),_:2},1024)),d(" "+h(o.nickname),1)])]),prepend:u(()=>[c(I,{modelValue:t.value.platform,"onUpdate:modelValue":a[0]||(a[0]=o=>t.value.platform=o),onChange:y,placeholder:"\uD50C\uB7AB\uD3FC",style:{width:"115px"},size:"large"},{default:u(()=>[(m(!0),g(J,null,K(w.value,o=>(m(),B(p,{key:o.value,label:o.label,value:o.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),append:u(()=>[c(V,{icon:j(U),onClick:v,size:"large"},null,8,["icon"])]),_:1},8,["modelValue","onKeyup"])]),_:1})]),_:1})])}}}),Y={class:"main"},te=A({__name:"index",setup(E){const _=G(),t=async l=>{const r=H.service({lock:!0,text:"\uC7A0\uC2DC\uB9CC \uAE30\uB2E4\uB824\uC8FC\uC138\uC694...",background:"rgba(0, 0, 0, 0.7)"}),s=await R(l),i=await T(l);r.close(),s===200&&i===200&&_.push(`/profile/${l.platform}/${l.nickname}`),i===404&&q(),(s===429||i===429)&&Q()};return(l,r)=>{const s=n("el-col"),i=n("el-row");return m(),g("div",Y,[c(i,{align:"middle",justify:"center"},{default:u(()=>[c(s,null,{default:u(()=>[c(X,{onSearchInfo:t})]),_:1})]),_:1})])}}});export{te as default};
